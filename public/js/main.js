(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,a,t){},161:function(e,a,t){},169:function(e,a,t){e.exports=t(401)},174:function(e,a,t){},176:function(e,a,t){},393:function(e,a,t){},397:function(e,a,t){},401:function(e,a,t){"use strict";t.r(a);var n=t(66),l=t.n(n);t(174),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(0),i=t.n(c),o=t(404),r=t(403),s=t(96),m=t(2),u=t(3),d=t(5),h=t(4),p=t(6),g=(t(176),t(21)),E=t.n(g);t(104);var v=function(e){var a=e.onClick;return i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"Been There"),i.a.createElement("nav",{className:"main-nav"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("span",{className:"yellow-bg"},"Account")),i.a.createElement("li",null,i.a.createElement("span",{className:"yellow-bg",onClick:a},"Sign Out")))))},b=t(45);function f(e){var a=e.places,t=e.onClick;return i.a.createElement(b.GoogleMap,{defaultCenter:{lat:22.37514,lng:91.797224},defaultZoom:3},a.map(function(e){return i.a.createElement(b.Marker,{position:{lat:e.lat,lng:e.lng},key:"".concat(e.name),onClick:function(){return t(e.lat,e.lng)}},i.a.createElement(b.InfoWindow,null,i.a.createElement("div",null,e.name)))}))}f.defaultProps={places:[]};var S=Object(b.withGoogleMap)(f),y=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).state={currentLatLng:{lat:-33.870937,lng:151.204588}},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.props,a=e.places,t=e.onClick;return i.a.createElement("div",{className:"map"},i.a.createElement(S,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyB7SLqsEtoex-htI--MdJqOM_JJRai-A9g","&libraries=geometry,drawing,places"),loadingElement:i.a.createElement("div",{style:{height:"100%"}}),containerElement:i.a.createElement("div",{style:{height:"90vh",width:"100vw"}}),mapElement:i.a.createElement("div",{style:{height:"100%"}}),onClick:t,places:a}))}}]),a}(c.Component);y.defaultProps={places:[]};var C=y;var w=function(e){var a=e.place,t=e.onDeleteClick,n=e.onEditClick;return i.a.createElement("div",null,a.lat?i.a.createElement("div",null,i.a.createElement("img",{src:a.image,alt:a.name}),i.a.createElement("h2",null,i.a.createElement("span",{className:"yellow"},a.name)),i.a.createElement("p",{className:"category"},a.category),i.a.createElement("p",{className:"description"},a.description),i.a.createElement("i",{className:"material-icons edit-delete-btn",onClick:n},"edit"),i.a.createElement("i",{className:"material-icons edit-delete-btn",onClick:t},"delete")):i.a.createElement("p",null,"Click on a marker to see more information about the place."))},k=(t(393),function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).state={showSideBar:!0,showPlaceDetail:!0},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.props,a=e.place,t=e.onDeleteClick,n=e.onEditClick;return i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",{className:"sidebar-header"},i.a.createElement("i",{className:"material-icons"},"pin_drop"),i.a.createElement("button",{className:"open-close"},i.a.createElement("i",{className:"material-icons"},"close"))),i.a.createElement("div",{className:"sidebar-place-detail"},i.a.createElement("h3",null,i.a.createElement("span",{className:"yellow-bg"},"My Places")),this.state.showPlaceDetail&&i.a.createElement(w,{place:a,onDeleteClick:t,onEditClick:n})))}}]),a}(c.Component)),O=t(167),j=t(67),P=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){var a=e.target.name,n=e.target.value;t.setState(Object(j.a)({},a,n))},t.handleSubmit=function(e){e.preventDefault();var a=new FormData(e.target);t.props.onSubmit(a),t.setState({name:"",category:"See & Do",description:"",lat:"",lng:""})},t.state={name:"",category:"See & Do",description:"",lat:"",lng:"",image:null},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.placeData,a=e.geocodedPrediction,t=e.originalPrediction.description.split(",")[0],n=a.geometry.location.lat(),l=a.geometry.location.lng();this.setState({name:t,lat:n,lng:l})}},{key:"render",value:function(){var e=this.state,a=e.name,t=e.category,n=e.description,l=e.lat,c=e.lng;return i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Name"),i.a.createElement("input",{name:"name",type:"text",value:a,onChange:this.handleChange})),i.a.createElement("div",null,i.a.createElement("label",null,"Category"),i.a.createElement("select",{name:"category",value:t,onChange:this.handleChange},i.a.createElement("option",{value:"See & Do"},"See & Do"),i.a.createElement("option",{value:"Food & Drink"},"Food & Drink"),i.a.createElement("option",{value:"Nightlife"},"Nightlife"),i.a.createElement("option",{value:"Shop"},"Shop"))),i.a.createElement("div",null,i.a.createElement("label",null,"Image"),i.a.createElement("input",{name:"image",type:"file"})),i.a.createElement("div",null,i.a.createElement("label",null,"Description"),i.a.createElement("textarea",{name:"description",value:n,onChange:this.handleChange})),i.a.createElement("input",{type:"submit",value:"Add Place"}),i.a.createElement("input",{type:"hidden",value:l,name:"lat"}),i.a.createElement("input",{type:"hidden",value:c,name:"lng"}))}}]),a}(c.Component),N=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).handleInputChange=function(e){t.setState({search:e.target.value,value:e.target.value})},t.handleSelectSuggest=function(e,a){t.setState({search:"",value:a.description,placeData:{geocodedPrediction:e,originalPrediction:a},showAddPlaceForm:!0})},t.handleFocus=function(){t.setState({showAddPlaceForm:!1})},t.state={search:"",value:"",placeData:{geocodedPrediction:{},originalPrediction:{}},showAddPlaceForm:!1},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.state,a=e.search,t=e.value,n=e.placeData,l=e.showAddPlaceForm,c=this.props.onAddPlaceSubmit;return i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement("span",{className:"yellow"},"Add New Place")),i.a.createElement(O.a,{googleMaps:window.google.maps,autocompletionRequest:{input:a},onSelectSuggest:this.handleSelectSuggest,textNoResults:"Sorry, place not found",customRender:function(e){return i.a.createElement("div",{className:"customWrapper"},e?e.description:"Sorry, place not found")}},i.a.createElement("input",{type:"text",value:t,placeholder:"Search for a place",onChange:this.handleInputChange,onFocus:this.handleFocus})),l&&i.a.createElement(P,{placeData:n,onSubmit:c}))}}]),a}(c.Component),D=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(j.a)({},n,l))},t.handleSubmit=function(e){e.preventDefault();var a=t.state,n={name:a.name,category:a.category,description:a.description,lat:a.lat,lng:a.lng};t.props.onEditPlaceSubmit(n)},t.state={name:"",category:"See & Do",description:"",lat:"",lng:""},t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.selectedPlace,a=e.name,t=e.category,n=e.description,l=e.lat,c=e.lng;this.setState({name:a,category:t,description:n,lat:l,lng:c})}},{key:"render",value:function(){var e=this.state,a=e.name,t=e.category,n=e.description,l=e.lat,c=e.lng;return i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement("span",{className:"yellow"},"Edit Place")),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Name"),i.a.createElement("input",{name:"name",type:"text",value:a,onChange:this.handleChange})),i.a.createElement("div",null,i.a.createElement("label",null,"Category"),i.a.createElement("select",{name:"category",value:t,onChange:this.handleChange},i.a.createElement("option",{value:"See & Do"},"See & Do"),i.a.createElement("option",{value:"Food & Drink"},"Food & Drink"),i.a.createElement("option",{value:"Nightlife"},"Nightlife"),i.a.createElement("option",{value:"Shop"},"Shop"))),i.a.createElement("div",null,i.a.createElement("label",null,"Description"),i.a.createElement("textarea",{name:"description",value:n,onChange:this.handleChange})),i.a.createElement("input",{type:"submit",value:"Edit Place"}),i.a.createElement("input",{type:"hidden",value:l,name:"lat"}),i.a.createElement("input",{type:"hidden",value:c,name:"lng"})))}}]),a}(c.Component),I=(t(397),function(e){function a(){return Object(m.a)(this,a),Object(d.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(u.a)(a,[{key:"render",value:function(){var e=this.props,a=e.show,t=e.closeModal,n=e.onAddPlaceSubmit,l=e.onEditPlaceSubmit,c=e.formType,o=e.selectedPlace;return i.a.createElement("div",{className:"modal",style:{display:a?"block":"none"}},i.a.createElement("div",{className:"overlay",onClick:t}),i.a.createElement("div",{className:"modal-content"},i.a.createElement("button",{title:"Close",className:"close-modal",onClick:t},i.a.createElement("i",{className:"material-icons"},"close")),"add"===c?i.a.createElement(N,{onAddPlaceSubmit:n}):i.a.createElement(D,{onEditPlaceSubmit:l,selectedPlace:o})))}}]),a}(c.Component)),M="/user",A=function(e){function a(){var e;return Object(m.a)(this,a),(e=Object(d.a)(this,Object(h.a)(a).call(this))).fetchPlaces=function(){E.a.get("".concat(M,"/places")).then(function(a){e.setState({places:a.data})}).catch(function(a){e.props.history.push({pathname:"/signin"})})},e.handleSignOut=function(){localStorage.removeItem("authToken"),e.props.history.push("/signin")},e.closeModal=function(){e.setState({showModal:!1})},e.handlePlaceClick=function(a,t){var n=e.state.places.find(function(e){return e.lat===a&&e.lng});e.setState({selectedPlace:n})},e.handleAddPlaceClick=function(){e.setState({showModal:!0,formType:"add"})},e.handleAddPlaceSubmit=function(a){E.a.post("".concat(M,"/place"),a).then(function(a){var t=a.data;e.setState({places:Object(s.a)(e.state.places).concat([t]),selectedPlace:t,showModal:!1})}).catch(console.warn)},e.handleEditPlaceClick=function(){e.setState({formType:"edit",showModal:!0})},e.handleEditPlaceSubmit=function(a){var t=e.state.selectedPlace,n=t.lat,l=t.lng;E.a.put("".concat(M,"/place/").concat(n,"/").concat(l),a).then(function(a){var t=e.state.places.filter(function(e){return e.lat!==n&&e.lng!==l}),c=a.data;e.setState({places:Object(s.a)(t).concat([c]),selectedPlace:c,showModal:!1})}).catch(console.warn)},e.handleDeletePlaceClick=function(){var a=e.state.selectedPlace,t=a.lat,n=a.lng;E.a.delete("".concat(M,"/place/").concat(t,"/").concat(n)).then(function(a){var l=e.state.places.filter(function(e){return e.lat!==t&&e.lng!==n});e.setState({places:l,selectedPlace:{}})}).catch(console.warn)},e.state={places:[],selectedPlace:{},showModal:!1,formType:"add"},e}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentWillMount",value:function(){if("localStorage"in window){var e=localStorage.getItem("authToken");e?E.a.defaults.headers.common.Authorization="Bearer ".concat(e):this.props.history.push({pathname:"/signin"}),this.fetchPlaces()}}},{key:"render",value:function(){var e=this.state,a=e.places,t=e.selectedPlace,n=e.showModal,l=e.formType;return i.a.createElement("div",{className:"App"},i.a.createElement(v,{onClick:this.handleSignOut}),i.a.createElement("div",{className:"main-container"},i.a.createElement(k,{place:t,onDeleteClick:this.handleDeletePlaceClick,onEditClick:this.handleEditPlaceClick}),i.a.createElement(C,{places:a,onClick:this.handlePlaceClick})),i.a.createElement("button",{className:"add-place-btn",onClick:this.handleAddPlaceClick},i.a.createElement("i",{className:"material-icons"},"add_location")),i.a.createElement(I,{show:n,formType:l,selectedPlace:t,closeModal:this.closeModal,onAddPlaceSubmit:this.handleAddPlaceSubmit,onEditPlaceSubmit:this.handleEditPlaceSubmit}))}}]),a}(c.Component),x=t(16),F=t(402);var T=function(){return i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"Been There"),i.a.createElement("nav",{className:"main-nav"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(F.a,{to:"/signin"},i.a.createElement("span",{className:"yellow-bg"},"Sign In"))),i.a.createElement("li",null,i.a.createElement(F.a,{to:"/signup"},i.a.createElement("span",{className:"yellow-bg"},"Sign Up"))))))},B=(t(161),function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).state={emailInput:"",passwordInput:"",error:""},t.handleEmailChange=t.handleEmailChange.bind(Object(x.a)(Object(x.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(x.a)(Object(x.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(x.a)(Object(x.a)(t))),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.location.state&&this.setState({error:this.props.location.state.message})}},{key:"handleEmailChange",value:function(e){this.setState({emailInput:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passwordInput:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),E.a.post("".concat("/user","/signin"),{email:this.state.emailInput,password:this.state.passwordInput}).then(function(e){E.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),"localStorage"in window&&localStorage.setItem("authToken",e.data.token),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.message})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"login-container"},i.a.createElement(T,null),i.a.createElement("div",{className:"login-box"},i.a.createElement("h2",null,"Sign In"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Email"),i.a.createElement("input",{type:"email",value:this.state.emailInput,onChange:this.handleEmailChange})),i.a.createElement("div",null,i.a.createElement("label",null,"Password"),i.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:this.handlePasswordChange})),i.a.createElement("input",{type:"submit",value:"Sign In"})),i.a.createElement("p",{className:"error-msg"},this.state.error)))}}]),a}(c.Component)),J=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this,e))).state={emailInput:"",passwordInput:"",error:""},t.handleEmailChange=t.handleEmailChange.bind(Object(x.a)(Object(x.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(x.a)(Object(x.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(x.a)(Object(x.a)(t))),t}return Object(p.a)(a,e),Object(u.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({emailInput:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passwordInput:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),E.a.post("".concat("/user","/signup"),{email:this.state.emailInput,password:this.state.passwordInput}).then(function(e){E.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),"localStorage"in window&&localStorage.setItem("authToken",e.data.token),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.message})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"login-container"},i.a.createElement(T,null),i.a.createElement("div",{className:"login-box"},i.a.createElement("h2",null,"Sign Up"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Email"),i.a.createElement("input",{type:"email",value:this.state.emailInput,onChange:this.handleEmailChange})),i.a.createElement("div",null,i.a.createElement("label",null,"Password"),i.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:this.handlePasswordChange})),i.a.createElement("input",{type:"submit",value:"Sign Up"})),i.a.createElement("p",{className:"error-msg"},this.state.error)))}}]),a}(c.Component),R=i.a.createElement(o.a,null,i.a.createElement("div",null,i.a.createElement(r.a,{exact:!0,path:"/",component:A}),i.a.createElement(r.a,{exact:!0,path:"/signin",component:B}),i.a.createElement(r.a,{exact:!0,path:"/signup",component:J})));l.a.render(R,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[169,2,1]]]);
//# sourceMappingURL=main.92e840b6.chunk.js.map