(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,a,t){},161:function(e,a,t){},169:function(e,a,t){e.exports=t(401)},174:function(e,a,t){},176:function(e,a,t){},393:function(e,a,t){},395:function(e,a,t){},401:function(e,a,t){"use strict";t.r(a);var n=t(66),l=t.n(n);t(174),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(0),o=t.n(c),r=t(404),i=t(403),s=t(96),m=t(11),d=t(12),u=t(14),h=t(13),p=t(15),E=(t(176),t(21)),g=t.n(E);t(104);var v=function(e){var a=e.onClick;return o.a.createElement("div",{className:"header"},o.a.createElement("h1",null,"Been There"),o.a.createElement("nav",{className:"main-nav"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("span",{className:"yellow-bg"},"Account")),o.a.createElement("li",null,o.a.createElement("span",{className:"yellow-bg",onClick:a},"Sign Out")))))},b=t(45);function f(e){var a=e.places,t=e.onClick;return o.a.createElement(b.GoogleMap,{defaultCenter:{lat:22.37514,lng:91.797224},defaultZoom:3},a.map(function(e){return o.a.createElement(b.Marker,{position:{lat:e.lat,lng:e.lng},key:"".concat(e.name),onClick:function(){return t(e.lat,e.lng)}},o.a.createElement(b.InfoWindow,null,o.a.createElement("div",null,e.name)))}))}f.defaultProps={places:[]};var C=Object(b.withGoogleMap)(f),S=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={currentLatLng:{lat:-33.870937,lng:151.204588}},t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props,a=e.places,t=e.onClick;return o.a.createElement("div",{className:"map"},o.a.createElement(C,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyB7SLqsEtoex-htI--MdJqOM_JJRai-A9g","&libraries=geometry,drawing,places"),loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"90vh",width:"100vw"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}}),onClick:t,places:a}))}}]),a}(c.Component);S.defaultProps={places:[]};var w=S;var y=function(e){var a=e.place,t=e.onDeleteClick,n=e.onEditClick;return o.a.createElement("div",null,a.lat?o.a.createElement("div",null,o.a.createElement("img",{src:a.image,alt:a.name}),o.a.createElement("h2",null,o.a.createElement("span",{className:"yellow"},a.name)),o.a.createElement("h4",{className:"category"},a.category),o.a.createElement("p",{className:"description"},a.description),o.a.createElement("p",{className:"address"},a.address),o.a.createElement("i",{className:"material-icons edit-delete-btn",onClick:n},"edit"),o.a.createElement("i",{className:"material-icons edit-delete-btn",onClick:t},"delete")):o.a.createElement("p",null,"Click on a marker to see more information about the place."))},k=(t(393),function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={showSideBar:!0,showPlaceDetail:!0},t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props,a=e.place,t=e.onDeleteClick,n=e.onEditClick;return o.a.createElement("div",{className:"sidebar"},o.a.createElement("div",{className:"sidebar-header"},o.a.createElement("i",{className:"material-icons"},"pin_drop"),o.a.createElement("button",{className:"open-close"},o.a.createElement("i",{className:"material-icons"},"close"))),o.a.createElement("div",{className:"sidebar-place-detail"},o.a.createElement("h3",null,o.a.createElement("span",{className:"yellow-bg"},"My Places")),this.state.showPlaceDetail&&o.a.createElement(y,{place:a,onDeleteClick:t,onEditClick:n})))}}]),a}(c.Component));t(395);var O=function(e){var a=e.closeModal,t=e.children;return o.a.createElement("div",{className:"modal"},o.a.createElement("div",{className:"overlay",onClick:a}),o.a.createElement("div",{className:"modal-content"},o.a.createElement("button",{title:"Close",className:"close-modal",onClick:a},o.a.createElement("i",{className:"material-icons"},"close")),t))},j=t(167),N=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleInputChange=function(e){t.setState({search:e.target.value,value:e.target.value})},t.handleSelectSuggest=function(e,a){t.setState({search:"",value:a.description}),t.props.onChange(e,a)},t.state={search:"",value:""},t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.state,a=e.search,t=e.value;return o.a.createElement("div",{className:"search-modal-wrapper"},o.a.createElement("h3",null,o.a.createElement("span",{className:"yellow"},"Add New Place")),o.a.createElement(j.a,{googleMaps:window.google.maps,autocompletionRequest:{input:a},onSelectSuggest:this.handleSelectSuggest,textNoResults:"Sorry, place not found",customRender:function(e){return o.a.createElement("div",{className:"customWrapper"},e?e.description:"Sorry, place not found")}},o.a.createElement("input",{type:"text",value:t,placeholder:"Search for a place",onChange:this.handleInputChange,className:"search-place-input"})))}}]),a}(c.Component),P=t(67),M=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){var a=e.target.name,n=e.target.value;t.setState(Object(P.a)({},a,n))},t.handleSubmit=function(e){e.preventDefault();var a=new FormData(e.target);t.props.onSubmit(a)},t.state={name:"",address:"",category:"See & Do",description:"",lat:"",lng:""},t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.placeData,a=e.geocodedPrediction,t=e.originalPrediction.description.split(",")[0],n=a.formatted_address,l=a.geometry.location.lat(),c=a.geometry.location.lng();this.setState({name:t,address:n,lat:l,lng:c})}},{key:"render",value:function(){var e=this.state,a=e.name,t=e.address,n=e.category,l=e.description,c=e.lat,r=e.lng;return o.a.createElement("div",null,o.a.createElement("h3",null,o.a.createElement("span",{className:"yellow"},"Add New Place")),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",null,o.a.createElement("label",null,"Name"),o.a.createElement("input",{name:"name",type:"text",value:a,onChange:this.handleChange})),o.a.createElement("div",null,o.a.createElement("label",null,"Address"),o.a.createElement("input",{name:"address",type:"text",value:t,onChange:this.handleChange})),o.a.createElement("div",null,o.a.createElement("label",null,"Category"),o.a.createElement("select",{name:"category",value:n,onChange:this.handleChange},o.a.createElement("option",{value:"See & Do"},"See & Do"),o.a.createElement("option",{value:"Food & Drink"},"Food & Drink"),o.a.createElement("option",{value:"Nightlife"},"Nightlife"),o.a.createElement("option",{value:"Shopping"},"Shopping"))),o.a.createElement("div",null,o.a.createElement("label",null,"Description"),o.a.createElement("textarea",{name:"description",value:l,onChange:this.handleChange})),o.a.createElement("div",null,o.a.createElement("label",{className:"image-label"},"Image"),o.a.createElement("input",{name:"image",type:"file"})),o.a.createElement("input",{type:"submit",value:"Add Place"}),o.a.createElement("input",{type:"hidden",value:c,name:"lat"}),o.a.createElement("input",{type:"hidden",value:r,name:"lng"})))}}]),a}(c.Component),D=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).handleChange=function(e){var a=e.target,n=a.name,l=a.value;t.setState(Object(P.a)({},n,l))},t.handleSubmit=function(e){e.preventDefault();var a=t.state,n={name:a.name,address:a.address,category:a.category,description:a.description,lat:a.lat,lng:a.lng};t.props.onSubmit(n)},t.state={name:"",address:"",category:"See & Do",description:"",lat:"",lng:""},t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.selectedPlace,a=e.name,t=e.address,n=e.category,l=e.description,c=e.lat,o=e.lng;this.setState({name:a,address:t,category:n,description:l,lat:c,lng:o})}},{key:"render",value:function(){var e=this.state,a=e.name,t=e.address,n=e.category,l=e.description,c=e.lat,r=e.lng;return o.a.createElement("div",null,o.a.createElement("h3",null,o.a.createElement("span",{className:"yellow"},"Edit Place")),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",null,o.a.createElement("label",null,"Name"),o.a.createElement("input",{name:"name",type:"text",value:a,onChange:this.handleChange})),o.a.createElement("div",null,o.a.createElement("label",null,"Address"),o.a.createElement("input",{name:"address",type:"text",value:t,onChange:this.handleChange})),o.a.createElement("div",null,o.a.createElement("label",null,"Category"),o.a.createElement("select",{name:"category",value:n,onChange:this.handleChange},o.a.createElement("option",{value:"See & Do"},"See & Do"),o.a.createElement("option",{value:"Food & Drink"},"Food & Drink"),o.a.createElement("option",{value:"Nightlife"},"Nightlife"),o.a.createElement("option",{value:"Shop"},"Shop"))),o.a.createElement("div",null,o.a.createElement("label",null,"Description"),o.a.createElement("textarea",{name:"description",value:l,onChange:this.handleChange})),o.a.createElement("input",{type:"submit",value:"Edit Place"}),o.a.createElement("input",{type:"hidden",value:c,name:"lat"}),o.a.createElement("input",{type:"hidden",value:r,name:"lng"})))}}]),a}(c.Component);var I=function(e){var a=e.selectedPlace,t=e.onClick,n=e.closeModal;return o.a.createElement("div",null,o.a.createElement("h3",null,o.a.createElement("span",{className:"yellow"},"Delete Place")),o.a.createElement("p",{className:"delete-confirmation"},"Please confirm that you want",o.a.createElement("span",{className:"bold"}," ",a.name," "),"permanently deleted from your saved places."),o.a.createElement("button",{className:"delete",onClick:t},"Delete"),o.a.createElement("button",{className:"delete",onClick:n},"Cancel"))},A="/user",x=function(e){function a(){var e;return Object(m.a)(this,a),(e=Object(u.a)(this,Object(h.a)(a).call(this))).fetchPlaces=function(){g.a.get("".concat(A,"/places")).then(function(a){e.setState({places:a.data})}).catch(function(a){e.props.history.push({pathname:"/signin"})})},e.handleSignOut=function(){localStorage.removeItem("authToken"),e.props.history.push("/signin")},e.closeModal=function(){e.setState({showSearchModal:!1,showAddModal:!1,showEditModal:!1,showDeleteModal:!1})},e.handlePlaceClick=function(a,t){var n=e.state.places.find(function(e){return e.lat===a&&e.lng});e.setState({selectedPlace:n})},e.handleAddPlaceClick=function(){e.setState({showSearchModal:!0})},e.handleSearchPlaceChange=function(a,t){e.setState({showSearchModal:!1,showAddModal:!0,placeData:{geocodedPrediction:a,originalPrediction:t}})},e.handleAddPlaceSubmit=function(a){g.a.post("".concat(A,"/place"),a).then(function(a){var t=a.data;e.setState({places:Object(s.a)(e.state.places).concat([t]),selectedPlace:t,showAddModal:!1})}).catch(console.warn)},e.handleEditPlaceClick=function(){e.setState({showEditModal:!0})},e.handleEditPlaceSubmit=function(a){var t=e.state.selectedPlace,n=t.lat,l=t.lng;g.a.put("".concat(A,"/place/").concat(n,"/").concat(l),a).then(function(a){var t=e.state.places.filter(function(e){return e.lat!==n&&e.lng!==l}),c=a.data;e.setState({places:Object(s.a)(t).concat([c]),selectedPlace:c,showEditModal:!1})}).catch(console.warn)},e.handleDeletePlaceClick=function(){e.setState({showDeleteModal:!0})},e.handleDeletePlaceConfirm=function(){var a=e.state.selectedPlace,t=a.lat,n=a.lng;g.a.delete("".concat(A,"/place/").concat(t,"/").concat(n)).then(function(a){var l=e.state.places.filter(function(e){return e.lat!==t&&e.lng!==n});e.setState({places:l,selectedPlace:{},showDeleteModal:!1})}).catch(console.warn)},e.state={places:[],selectedPlace:{},showSearchModal:!1,showAddModal:!1,showEditModal:!1,showDeleteModal:!1,placeData:{geocodedPrediction:{},originalPrediction:{}}},e}return Object(p.a)(a,e),Object(d.a)(a,[{key:"componentWillMount",value:function(){if("localStorage"in window){var e=localStorage.getItem("authToken");e?g.a.defaults.headers.common.Authorization="Bearer ".concat(e):this.props.history.push({pathname:"/signin"}),this.fetchPlaces()}}},{key:"render",value:function(){var e=this.state,a=e.places,t=e.selectedPlace,n=e.showSearchModal,l=e.showAddModal,c=e.showEditModal,r=e.showDeleteModal,i=e.placeData;return o.a.createElement("div",{className:"App"},o.a.createElement(v,{onClick:this.handleSignOut}),o.a.createElement("div",{className:"main-container"},o.a.createElement(k,{place:t,onEditClick:this.handleEditPlaceClick,onDeleteClick:this.handleDeletePlaceClick}),o.a.createElement(w,{places:a,onClick:this.handlePlaceClick})),o.a.createElement("button",{className:"add-place-btn",onClick:this.handleAddPlaceClick},o.a.createElement("i",{className:"material-icons"},"add_location")),n&&o.a.createElement(O,{closeModal:this.closeModal},o.a.createElement(N,{onChange:this.handleSearchPlaceChange})),l&&o.a.createElement(O,{closeModal:this.closeModal},o.a.createElement(M,{placeData:i,onSubmit:this.handleAddPlaceSubmit})),c&&o.a.createElement(O,{closeModal:this.closeModal},o.a.createElement(D,{selectedPlace:t,onSubmit:this.handleEditPlaceSubmit})),r&&o.a.createElement(O,{closeModal:this.closeModal},o.a.createElement(I,{selectedPlace:t,onClick:this.handleDeletePlaceConfirm,closeModal:this.closeModal})))}}]),a}(c.Component),B=t(16),T=t(402);var F=function(){return o.a.createElement("div",{className:"header"},o.a.createElement("h1",null,"Been There"),o.a.createElement("nav",{className:"main-nav"},o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(T.a,{to:"/signin"},o.a.createElement("span",{className:"yellow-bg"},"Sign In"))),o.a.createElement("li",null,o.a.createElement(T.a,{to:"/signup"},o.a.createElement("span",{className:"yellow-bg"},"Sign Up"))))))},J=(t(161),function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={emailInput:"",passwordInput:"",error:""},t.handleEmailChange=t.handleEmailChange.bind(Object(B.a)(Object(B.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(B.a)(Object(B.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(B.a)(Object(B.a)(t))),t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.location.state&&this.setState({error:this.props.location.state.message})}},{key:"handleEmailChange",value:function(e){this.setState({emailInput:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passwordInput:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),g.a.post("".concat("/user","/signin"),{email:this.state.emailInput,password:this.state.passwordInput}).then(function(e){g.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),"localStorage"in window&&localStorage.setItem("authToken",e.data.token),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.message})})}},{key:"render",value:function(){return o.a.createElement("div",{className:"login-container"},o.a.createElement(F,null),o.a.createElement("div",{className:"login-box"},o.a.createElement("h2",null,"Sign In"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",null,o.a.createElement("label",null,"Email"),o.a.createElement("input",{type:"email",value:this.state.emailInput,onChange:this.handleEmailChange})),o.a.createElement("div",null,o.a.createElement("label",null,"Password"),o.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:this.handlePasswordChange})),o.a.createElement("input",{type:"submit",value:"Sign In"})),o.a.createElement("p",{className:"error-msg"},this.state.error)))}}]),a}(c.Component)),R=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={emailInput:"",passwordInput:"",error:""},t.handleEmailChange=t.handleEmailChange.bind(Object(B.a)(Object(B.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(B.a)(Object(B.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(B.a)(Object(B.a)(t))),t}return Object(p.a)(a,e),Object(d.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({emailInput:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passwordInput:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),g.a.post("".concat("/user","/signup"),{email:this.state.emailInput,password:this.state.passwordInput}).then(function(e){g.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),"localStorage"in window&&localStorage.setItem("authToken",e.data.token),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.message})})}},{key:"render",value:function(){return o.a.createElement("div",{className:"login-container"},o.a.createElement(F,null),o.a.createElement("div",{className:"login-box"},o.a.createElement("h2",null,"Sign Up"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",null,o.a.createElement("label",null,"Email"),o.a.createElement("input",{type:"email",value:this.state.emailInput,onChange:this.handleEmailChange})),o.a.createElement("div",null,o.a.createElement("label",null,"Password"),o.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:this.handlePasswordChange})),o.a.createElement("input",{type:"submit",value:"Sign Up"})),o.a.createElement("p",{className:"error-msg"},this.state.error)))}}]),a}(c.Component),W=o.a.createElement(r.a,null,o.a.createElement("div",null,o.a.createElement(i.a,{exact:!0,path:"/",component:x}),o.a.createElement(i.a,{exact:!0,path:"/signin",component:J}),o.a.createElement(i.a,{exact:!0,path:"/signup",component:R})));l.a.render(W,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[169,2,1]]]);
//# sourceMappingURL=main.bc8bd9e7.chunk.js.map