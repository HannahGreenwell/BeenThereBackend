(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,a,t){},159:function(e,a,t){},169:function(e,a,t){e.exports=t(401)},174:function(e,a,t){},176:function(e,a,t){},393:function(e,a,t){},397:function(e,a,t){},401:function(e,a,t){"use strict";t.r(a);var n=t(66),l=t.n(n);t(174),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(0),i=t.n(c),o=t(404),r=t(403),s=t(166),u=t(13),m=t(14),h=t(16),d=t(15),p=t(17),g=t(2),E=(t(176),t(22)),b=t.n(E);t(102);var v=function(e){var a=e.onClick;return i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"Been There"),i.a.createElement("nav",{className:"main-nav"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("span",{className:"yellow-bg"},"Account")),i.a.createElement("li",null,i.a.createElement("span",{className:"yellow-bg",onClick:a},"Sign Out")))))},f=t(45);function S(e){var a=e.places,t=e.onClick;return i.a.createElement(f.GoogleMap,{defaultCenter:{lat:22.37514,lng:91.797224},defaultZoom:3},a.map(function(e){return i.a.createElement(f.Marker,{position:{lat:e.lat,lng:e.lng},key:"".concat(e.name),onClick:function(){return t(e.lat,e.lng)}},i.a.createElement(f.InfoWindow,null,i.a.createElement("div",null,e.name)))}))}S.defaultProps={places:[]};var y=Object(f.withGoogleMap)(S),w=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={currentLatLng:{lat:-33.870937,lng:151.204588}},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props,a=e.places,t=e.onClick;return i.a.createElement("div",{className:"map"},i.a.createElement(y,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyB7SLqsEtoex-htI--MdJqOM_JJRai-A9g","&libraries=geometry,drawing,places"),loadingElement:i.a.createElement("div",{style:{height:"100%"}}),containerElement:i.a.createElement("div",{style:{height:"90vh",width:"100vw"}}),mapElement:i.a.createElement("div",{style:{height:"100%"}}),onClick:t,places:a}))}}]),a}(c.Component);w.defaultProps={places:[]};var O=w;var k=function(e){var a=e.place,t=e.onClick;return i.a.createElement("div",null,a.lat?i.a.createElement("div",null,i.a.createElement("h2",null,i.a.createElement("span",{className:"yellow"},a.name)),i.a.createElement("p",{className:"category"},a.category),i.a.createElement("img",{src:a.image,alt:a.name}),i.a.createElement("p",{className:"description"},a.description),i.a.createElement("i",{className:"material-icons edit-delete-btn"},"edit"),i.a.createElement("i",{className:"material-icons edit-delete-btn",onClick:t},"delete")):i.a.createElement("p",null,"Click on a marker to see more information about the place."))},C=(t(393),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={showSideBar:!0,showPlaceDetail:!0},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props,a=e.place,t=e.onClick;return i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",{className:"sidebar-header"},i.a.createElement("i",{className:"material-icons"},"pin_drop"),i.a.createElement("button",{className:"open-close"},i.a.createElement("i",{className:"material-icons"},"close"))),i.a.createElement("div",{className:"sidebar-place-detail"},i.a.createElement("h3",null,i.a.createElement("span",{className:"yellow-bg"},"My Places")),this.state.showPlaceDetail&&i.a.createElement(k,{place:a,onClick:t})))}}]),a}(c.Component)),j=t(167),P=t(164),N=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).handleChange=function(e){var a=e.target.name,n=e.target.value;t.setState(Object(P.a)({},a,n))},t.handleSubmit=function(e){e.preventDefault();var a=new FormData(e.target);t.props.onSubmit(a),t.setState({name:"",category:"See & Do",description:"",lat:"",lng:""})},t.state={name:"",category:"See & Do",description:"",lat:"",lng:""},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.placeData,a=e.geocodedPrediction,t=e.originalPrediction.description.split(",")[0],n=a.geometry.location.lat(),l=a.geometry.location.lng();this.setState({name:t,lat:n,lng:l})}},{key:"render",value:function(){var e=this.state,a=e.name,t=e.category,n=e.description,l=e.lat,c=e.lng;return i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Name"),i.a.createElement("input",{name:"name",type:"text",value:a,onChange:this.handleChange})),i.a.createElement("div",null,i.a.createElement("label",null,"Category"),i.a.createElement("select",{name:"category",value:t,onChange:this.handleChange},i.a.createElement("option",{value:"See & Do"},"See & Do"),i.a.createElement("option",{value:"Food & Drink"},"Food & Drink"),i.a.createElement("option",{value:"Nightlife"},"Nightlife"),i.a.createElement("option",{value:"Shop"},"Shop"))),i.a.createElement("div",null,i.a.createElement("label",null,"Image"),i.a.createElement("input",{name:"image",type:"file"})),i.a.createElement("div",null,i.a.createElement("label",null,"Description"),i.a.createElement("textarea",{name:"description",value:n,onChange:this.handleChange})),i.a.createElement("input",{type:"submit",value:"Add Place"}),i.a.createElement("input",{type:"hidden",value:l,name:"lat"}),i.a.createElement("input",{type:"hidden",value:c,name:"lng"}))}}]),a}(c.Component),I=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={search:"",value:"",placeData:{geocodedPrediction:{},originalPrediction:{}},showAddPlaceForm:!1},t.handleSelectSuggest=t.handleSelectSuggest.bind(Object(g.a)(Object(g.a)(t))),t.handleInputChange=t.handleInputChange.bind(Object(g.a)(Object(g.a)(t))),t.handleFocus=t.handleFocus.bind(Object(g.a)(Object(g.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"handleInputChange",value:function(e){this.setState({search:e.target.value,value:e.target.value})}},{key:"handleSelectSuggest",value:function(e,a){console.log("SELECTED:",e,a),this.setState({search:"",value:a.description,placeData:{geocodedPrediction:e,originalPrediction:a},showAddPlaceForm:!0})}},{key:"handleFocus",value:function(){this.setState({showAddPlaceForm:!1})}},{key:"render",value:function(){var e=this.state,a=e.search,t=e.value,n=e.placeData,l=e.showAddPlaceForm,c=this.props.onSubmit;return i.a.createElement("div",null,i.a.createElement(j.a,{googleMaps:window.google.maps,autocompletionRequest:{input:a},onSelectSuggest:this.handleSelectSuggest,textNoResults:"Sorry, place not found",customRender:function(e){return i.a.createElement("div",{className:"customWrapper"},e?e.description:"Sorry, place not found")}},i.a.createElement("input",{type:"text",value:t,placeholder:"Search for a place",onChange:this.handleInputChange,onFocus:this.handleFocus})),l&&i.a.createElement(N,{placeData:n,onSubmit:c}))}}]),a}(c.Component);t(397);var D=function(e){var a=e.show,t=e.closeCallBack,n=e.onSubmit;return i.a.createElement("div",{className:"modal",style:{display:a?"block":"none"}},i.a.createElement("div",{className:"overlay",onClick:t}),i.a.createElement("div",{className:"modal-content"},i.a.createElement("h3",null,i.a.createElement("span",{className:"yellow"},"Add New Place")),i.a.createElement("button",{title:"Close",className:"close-modal",onClick:t},i.a.createElement("i",{className:"material-icons"},"close")),i.a.createElement(I,{onSubmit:n})))},M=function(e){function a(){var e;return Object(u.a)(this,a),(e=Object(h.a)(this,Object(d.a)(a).call(this))).state={places:[],selectedPlace:{},showModal:!1},e.handleSignOut=e.handleSignOut.bind(Object(g.a)(Object(g.a)(e))),e.toggleModal=e.toggleModal.bind(Object(g.a)(Object(g.a)(e))),e.handlePlaceClick=e.handlePlaceClick.bind(Object(g.a)(Object(g.a)(e))),e.handleDeletePlaceClick=e.handleDeletePlaceClick.bind(Object(g.a)(Object(g.a)(e))),e.handleAddPlaceSubmit=e.handleAddPlaceSubmit.bind(Object(g.a)(Object(g.a)(e))),e}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentWillMount",value:function(){if("localStorage"in window){var e=localStorage.getItem("authToken");e?b.a.defaults.headers.common.Authorization="Bearer ".concat(e):this.props.history.push({pathname:"/signin"}),this.fetchPlaces()}}},{key:"fetchPlaces",value:function(){var e=this;b.a.get("".concat("/user","/map")).then(function(a){e.setState({places:a.data})}).catch(function(a){e.props.history.push({pathname:"/signin"})})}},{key:"handleSignOut",value:function(){localStorage.removeItem("authToken"),this.props.history.push("/signin")}},{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"handlePlaceClick",value:function(e,a){var t=this.state.places.find(function(a){return a.lat===e&&a.lng});this.setState({selectedPlace:t})}},{key:"handleDeletePlaceClick",value:function(){var e=this,a=this.state.selectedPlace,t=a.lat,n=a.lng;b.a.delete("".concat("/user","/place/").concat(t,"/").concat(n)).then(function(a){e.setState({places:a.data,selectedPlace:{}})}).catch(console.warn)}},{key:"handleAddPlaceSubmit",value:function(e){var a=this;b.a.post("".concat("/user","/place"),e).then(function(e){var t=e.data;a.setState({places:Object(s.a)(a.state.places).concat([t]),selectedPlace:t,showModal:!1})}).catch(console.warn)}},{key:"render",value:function(){var e=this.state,a=e.places,t=e.selectedPlace,n=e.showModal;return i.a.createElement("div",{className:"App"},i.a.createElement(v,{onClick:this.handleSignOut}),i.a.createElement("div",{className:"main-container"},i.a.createElement(C,{place:t,onClick:this.handleDeletePlaceClick}),i.a.createElement(O,{places:a,onClick:this.handlePlaceClick})),i.a.createElement("button",{className:"add-place-btn",onClick:this.toggleModal},i.a.createElement("i",{className:"material-icons"},"add_location")),i.a.createElement(D,{show:n,closeCallBack:this.toggleModal,onSubmit:this.handleAddPlaceSubmit}))}}]),a}(c.Component),A=t(402);var F=function(){return i.a.createElement("div",{className:"header"},i.a.createElement("h1",null,"Been There"),i.a.createElement("nav",{className:"main-nav"},i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement(A.a,{to:"/signin"},i.a.createElement("span",{className:"yellow-bg"},"Sign In"))),i.a.createElement("li",null,i.a.createElement(A.a,{to:"/signup"},i.a.createElement("span",{className:"yellow-bg"},"Sign Up"))))))},x=(t(159),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={emailInput:"",passwordInput:"",error:""},t.handleEmailChange=t.handleEmailChange.bind(Object(g.a)(Object(g.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(g.a)(Object(g.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(g.a)(Object(g.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.location.state&&this.setState({error:this.props.location.state.message})}},{key:"handleEmailChange",value:function(e){this.setState({emailInput:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passwordInput:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),b.a.post("".concat("/user","/signin"),{email:this.state.emailInput,password:this.state.passwordInput}).then(function(e){b.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),"localStorage"in window&&localStorage.setItem("authToken",e.data.token),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.message})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"login-container"},i.a.createElement(F,null),i.a.createElement("div",{className:"login-box"},i.a.createElement("h2",null,"Sign In"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Email"),i.a.createElement("input",{type:"email",value:this.state.emailInput,onChange:this.handleEmailChange})),i.a.createElement("div",null,i.a.createElement("label",null,"Password"),i.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:this.handlePasswordChange})),i.a.createElement("input",{type:"submit",value:"Sign In"})),i.a.createElement("p",{className:"error-msg"},this.state.error)))}}]),a}(c.Component)),B=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={emailInput:"",passwordInput:"",error:""},t.handleEmailChange=t.handleEmailChange.bind(Object(g.a)(Object(g.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(g.a)(Object(g.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(g.a)(Object(g.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({emailInput:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passwordInput:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),b.a.post("".concat("/user","/signup"),{email:this.state.emailInput,password:this.state.passwordInput}).then(function(e){b.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),"localStorage"in window&&localStorage.setItem("authToken",e.data.token),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.message})})}},{key:"render",value:function(){return i.a.createElement("div",{className:"login-container"},i.a.createElement(F,null),i.a.createElement("div",{className:"login-box"},i.a.createElement("h2",null,"Sign Up"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("div",null,i.a.createElement("label",null,"Email"),i.a.createElement("input",{type:"email",value:this.state.emailInput,onChange:this.handleEmailChange})),i.a.createElement("div",null,i.a.createElement("label",null,"Password"),i.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:this.handlePasswordChange})),i.a.createElement("input",{type:"submit",value:"Sign Up"})),i.a.createElement("p",{className:"error-msg"},this.state.error)))}}]),a}(c.Component),T=i.a.createElement(o.a,null,i.a.createElement("div",null,i.a.createElement(r.a,{exact:!0,path:"/",component:M}),i.a.createElement(r.a,{exact:!0,path:"/signin",component:x}),i.a.createElement(r.a,{exact:!0,path:"/signup",component:B})));l.a.render(T,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[169,2,1]]]);
//# sourceMappingURL=main.44d17acf.chunk.js.map