(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,a,t){},159:function(e,a,t){},168:function(e,a,t){e.exports=t(400)},173:function(e,a,t){},175:function(e,a,t){},392:function(e,a,t){},396:function(e,a,t){},400:function(e,a,t){"use strict";t.r(a);var n=t(66),l=t.n(n);t(173),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=t(0),c=t.n(i),o=t(403),r=t(402),s=t(165),u=t(13),m=t(14),h=t(16),d=t(15),p=t(17),g=t(2),b=(t(175),t(22)),v=t.n(b);t(102);var E=function(e){var a=e.onClick;return c.a.createElement("div",{className:"header"},c.a.createElement("h1",null,"Been There"),c.a.createElement("nav",{className:"main-nav"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("span",{className:"yellow-bg"},"About")),c.a.createElement("li",null,c.a.createElement("span",{className:"yellow-bg"},"Account")),c.a.createElement("li",null,c.a.createElement("span",{className:"yellow-bg",onClick:a},"Sign Out")))))},f=t(45);function y(e){var a=e.pins,t=e.onClick;return c.a.createElement(f.GoogleMap,{defaultCenter:{lat:22.37514,lng:91.797224},defaultZoom:3},a.map(function(e){return c.a.createElement(f.Marker,{position:{lat:e.lat,lng:e.lng},key:"".concat(e.name),onClick:function(){return t(e.city,e.name)}},c.a.createElement(f.InfoWindow,null,c.a.createElement("div",null,e.name)))}))}y.defaultProps={pins:[]};var S=Object(f.withGoogleMap)(y),O=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={currentLatLng:{lat:-33.870937,lng:151.204588}},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props,a=e.pins,t=e.onClick;return c.a.createElement("div",{className:"map"},c.a.createElement(S,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyB7SLqsEtoex-htI--MdJqOM_JJRai-A9g","&libraries=geometry,drawing,places"),loadingElement:c.a.createElement("div",{style:{height:"100%"}}),containerElement:c.a.createElement("div",{style:{height:"90vh",width:"100vw"}}),mapElement:c.a.createElement("div",{style:{height:"100%"}}),onClick:t,pins:a}))}}]),a}(i.Component);O.defaultProps={pins:[]};var C=O;var w=function(e){var a=e.pin;return c.a.createElement("div",null,a.lat?c.a.createElement("div",null,c.a.createElement("h2",null,c.a.createElement("span",{className:"yellow"},a.name)),c.a.createElement("p",{className:"category"},a.category),c.a.createElement("img",{src:a.images,alt:a.name}),c.a.createElement("p",{className:"description"},a.description)):c.a.createElement("p",null,"Click on a marker to see more information about the place."))},j=(t(392),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={showSideBar:!0,showPinDetail:!0},t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this.props.pin;return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar-header"},c.a.createElement("i",{className:"material-icons"},"pin_drop"),c.a.createElement("button",{className:"open-close"},c.a.createElement("i",{className:"material-icons"},"close"))),c.a.createElement("div",{className:"sidebar-place-detail"},c.a.createElement("h3",null,c.a.createElement("span",{className:"yellow-bg"},"My Places")),this.state.showPinDetail&&c.a.createElement(w,{pin:e})))}}]),a}(i.Component)),k=t(166),N=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).handleImageChange=function(e){t.setState({image:e.target.files[0]})},t.state={name:"",category:"See & Do",description:"",lat:"",lng:"",city:"",image:null,loaded:0},t.handleNameChange=t.handleNameChange.bind(Object(g.a)(Object(g.a)(t))),t.handleCategoryChange=t.handleCategoryChange.bind(Object(g.a)(Object(g.a)(t))),t.handleDescriptionChange=t.handleDescriptionChange.bind(Object(g.a)(Object(g.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(g.a)(Object(g.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.placeData,a=e.geocodedPrediction,t=e.originalPrediction.description.split(",")[0],n=a.geometry.location.lat(),l=a.geometry.location.lng(),i=a.address_components[2].short_name;this.setState({name:t,lat:n,lng:l,city:i})}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value})}},{key:"handleCategoryChange",value:function(e){this.setState({category:e.target.value})}},{key:"handleDescriptionChange",value:function(e){this.setState({description:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var a=new FormData(e.target);this.props.onSubmit(a),this.setState({name:"",category:"See & Do",description:"",lat:"",lng:"",city:""})}},{key:"render",value:function(){var e=this.state,a=e.name,t=e.category,n=e.description,l=e.lat,i=e.lng,o=e.city;return c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("div",null,c.a.createElement("label",null,"Name"),c.a.createElement("input",{name:"name",type:"text",value:a,onChange:this.handleNameChange})),c.a.createElement("div",null,c.a.createElement("label",null,"Category"),c.a.createElement("select",{name:"category",value:t,onChange:this.handleCategoryChange},c.a.createElement("option",{value:"See & Do"},"See & Do"),c.a.createElement("option",{value:"Food & Drink"},"Food & Drink"),c.a.createElement("option",{value:"Nightlife"},"Nightlife"),c.a.createElement("option",{value:"Shop"},"Shop"))),c.a.createElement("div",null,c.a.createElement("label",null,"Image"),c.a.createElement("input",{name:"image",type:"file",onChange:this.handleImageChange})),c.a.createElement("div",null,c.a.createElement("label",null,"Description"),c.a.createElement("textarea",{name:"description",value:n,onChange:this.handleDescriptionChange})),c.a.createElement("input",{type:"submit",value:"Add Place"}),c.a.createElement("input",{type:"hidden",value:l,name:"lat"}),c.a.createElement("input",{type:"hidden",value:i,name:"lng"}),c.a.createElement("input",{type:"hidden",value:o,name:"city"}))}}]),a}(i.Component),P=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={search:"",value:"",placeData:{geocodedPrediction:{},originalPrediction:{}},showAddPlaceForm:!1},t.handleSelectSuggest=t.handleSelectSuggest.bind(Object(g.a)(Object(g.a)(t))),t.handleInputChange=t.handleInputChange.bind(Object(g.a)(Object(g.a)(t))),t.handleFocus=t.handleFocus.bind(Object(g.a)(Object(g.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"handleInputChange",value:function(e){this.setState({search:e.target.value,value:e.target.value})}},{key:"handleSelectSuggest",value:function(e,a){console.log("SELECTED:",e,a),this.setState({search:"",value:a.description,placeData:{geocodedPrediction:e,originalPrediction:a},showAddPlaceForm:!0})}},{key:"handleFocus",value:function(){this.setState({showAddPlaceForm:!1})}},{key:"render",value:function(){var e=this.state,a=e.search,t=e.value,n=e.placeData,l=e.showAddPlaceForm,i=this.props.onSubmit;return c.a.createElement("div",null,c.a.createElement(k.a,{googleMaps:window.google.maps,autocompletionRequest:{input:a},onSelectSuggest:this.handleSelectSuggest,textNoResults:"Sorry, place not found",customRender:function(e){return c.a.createElement("div",{className:"customWrapper"},e?e.description:"Sorry, place not found")}},c.a.createElement("input",{type:"text",value:t,placeholder:"Search for a place",onChange:this.handleInputChange,onFocus:this.handleFocus})),l&&c.a.createElement(N,{placeData:n,onSubmit:i}))}}]),a}(i.Component);t(396);var I=function(e){var a=e.show,t=e.closeCallBack,n=e.onSubmit;return c.a.createElement("div",{className:"modal",style:{display:a?"block":"none"}},c.a.createElement("div",{className:"overlay",onClick:t}),c.a.createElement("div",{className:"modal-content"},c.a.createElement("h3",null,c.a.createElement("span",{className:"yellow"},"Add New Place")),c.a.createElement("button",{title:"Close",className:"close-modal",onClick:t},c.a.createElement("i",{className:"material-icons"},"close")),c.a.createElement(P,{onSubmit:n})))},D=function(e){function a(){var e;return Object(u.a)(this,a),(e=Object(h.a)(this,Object(d.a)(a).call(this))).state={pins:[],selectedPin:{},showModal:!1},e.toggleModal=e.toggleModal.bind(Object(g.a)(Object(g.a)(e))),e.handleSignOut=e.handleSignOut.bind(Object(g.a)(Object(g.a)(e))),e.handlePinClick=e.handlePinClick.bind(Object(g.a)(Object(g.a)(e))),e.handleAddPlaceSubmit=e.handleAddPlaceSubmit.bind(Object(g.a)(Object(g.a)(e))),e}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentWillMount",value:function(){if("localStorage"in window){var e=localStorage.getItem("authToken");e?v.a.defaults.headers.common.Authorization="Bearer ".concat(e):this.props.history.push({pathname:"/login"}),this.fetchPins()}}},{key:"fetchPins",value:function(){var e=this;v.a.get("".concat("/user","/beenthere")).then(function(a){e.setState({pins:a.data})}).catch(function(a){e.props.history.push({pathname:"/login"})})}},{key:"toggleModal",value:function(){this.setState({showModal:!this.state.showModal})}},{key:"handleSignOut",value:function(){localStorage.removeItem("authToken"),this.props.history.push("/login")}},{key:"handlePinClick",value:function(e,a){var t=this;v.a.get("".concat("/user","/pin/").concat(e,"/").concat(a)).then(function(e){t.setState({selectedPin:e.data})}).catch(console.warn)}},{key:"handleAddPlaceSubmit",value:function(e){var a=this;v.a.post("".concat("/user","/pin"),e).then(function(e){console.log(e),a.setState({pins:Object(s.a)(a.state.pins).concat([e.data.pinToPush]),selectedPin:e.data.newPin,showModal:!1})}).catch(console.warn)}},{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(E,{onClick:this.handleSignOut}),c.a.createElement("div",{className:"main-container"},c.a.createElement(j,{pin:this.state.selectedPin,pinAdded:this.state.wasPinAdded}),c.a.createElement(C,{pins:this.state.pins,onClick:this.handlePinClick})),c.a.createElement("button",{className:"add-place-btn",onClick:this.toggleModal},c.a.createElement("i",{className:"material-icons"},"add_location")),c.a.createElement(I,{show:this.state.showModal,closeCallBack:this.toggleModal,onSubmit:this.handleAddPlaceSubmit}))}}]),a}(i.Component),M=t(401);var A=function(){return c.a.createElement("div",{className:"header"},c.a.createElement("h1",null,"Been There"),c.a.createElement("nav",{className:"main-nav"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(M.a,{to:"/login"},c.a.createElement("span",{className:"yellow-bg"},"Login"))),c.a.createElement("li",null,c.a.createElement(M.a,{to:"/signup"},c.a.createElement("span",{className:"yellow-bg"},"Sign Up"))))))},F=(t(159),function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={emailInput:"",passwordInput:"",error:""},t.handleEmailChange=t.handleEmailChange.bind(Object(g.a)(Object(g.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(g.a)(Object(g.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(g.a)(Object(g.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.location.state&&this.setState({error:this.props.location.state.message})}},{key:"handleEmailChange",value:function(e){this.setState({emailInput:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passwordInput:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),v.a.post("".concat("/user","/signin"),{email:this.state.emailInput,password:this.state.passwordInput}).then(function(e){v.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),"localStorage"in window&&localStorage.setItem("authToken",e.data.token),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.message})})}},{key:"render",value:function(){return c.a.createElement("div",{className:"login-container"},c.a.createElement(A,null),c.a.createElement("div",{className:"login-box"},c.a.createElement("h2",null,"Login"),c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("div",null,c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",value:this.state.emailInput,onChange:this.handleEmailChange})),c.a.createElement("div",null,c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:this.handlePasswordChange})),c.a.createElement("input",{type:"submit",value:"Login"})),c.a.createElement("p",{className:"error-msg"},this.state.error)))}}]),a}(i.Component)),x=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(d.a)(a).call(this,e))).state={emailInput:"",passwordInput:"",error:""},t.handleEmailChange=t.handleEmailChange.bind(Object(g.a)(Object(g.a)(t))),t.handlePasswordChange=t.handlePasswordChange.bind(Object(g.a)(Object(g.a)(t))),t.handleSubmit=t.handleSubmit.bind(Object(g.a)(Object(g.a)(t))),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"handleEmailChange",value:function(e){this.setState({emailInput:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passwordInput:e.target.value})}},{key:"handleSubmit",value:function(e){var a=this;e.preventDefault(),v.a.post("".concat("/user","/signup"),{email:this.state.emailInput,password:this.state.passwordInput}).then(function(e){v.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),"localStorage"in window&&localStorage.setItem("authToken",e.data.token),a.props.history.push("/")}).catch(function(e){a.setState({error:e.response.data.message})})}},{key:"render",value:function(){return c.a.createElement("div",{className:"login-container"},c.a.createElement(A,null),c.a.createElement("div",{className:"login-box"},c.a.createElement("h2",null,"Sign Up"),c.a.createElement("form",{onSubmit:this.handleSubmit},c.a.createElement("div",null,c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",value:this.state.emailInput,onChange:this.handleEmailChange})),c.a.createElement("div",null,c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",value:this.state.passwordInput,onChange:this.handlePasswordChange})),c.a.createElement("input",{type:"submit",value:"Sign Up"})),c.a.createElement("p",{className:"error-msg"},this.state.error)))}}]),a}(i.Component),B=c.a.createElement(o.a,null,c.a.createElement("div",null,c.a.createElement(r.a,{exact:!0,path:"/",component:D}),c.a.createElement(r.a,{exact:!0,path:"/login",component:F}),c.a.createElement(r.a,{exact:!0,path:"/signup",component:x})));l.a.render(B,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[168,2,1]]]);
//# sourceMappingURL=main.a74fb7cd.chunk.js.map